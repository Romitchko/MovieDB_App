{"ast":null,"code":"import { SET_SEARCH_STRING, ADD_ALL_GENRES, ADD_RECOMENDATIONS, ADD_MOVIE_DETAILS, ADD_POPULAR_MOVIES } from \"./actions\"; // les reducers\n\nexport var searchString = function searchString() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  if (action.type === SET_SEARCH_STRING) {\n    return action.payload;\n  }\n\n  return state;\n};\nexport var allGenres = function allGenres() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  if (action.type === ADD_ALL_GENRES) {\n    return action.payload.genres;\n  }\n\n  return state;\n};\nexport var recomendations = function recomendations() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  if (action.type === ADD_RECOMENDATIONS) {\n    return action.payload.results;\n  }\n\n  return state;\n};\nexport var movieDetails = function movieDetails() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  if (action.type === ADD_MOVIE_DETAILS) {\n    return action.payload;\n  }\n\n  return state;\n};\nexport var popularMovies = function popularMovies() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  if (action.type === ADD_POPULAR_MOVIES) {\n    return state.concat(action.payload);\n  }\n\n  return state;\n};\nexport var page = function page() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  console.log(\"AAAAAA\");\n\n  if (action.type === ADD_POPULAR_MOVIES) {\n    return state + 1;\n  }\n\n  return state;\n}; // les actions\n\nexport function setSearchString(searchString) {\n  return {\n    type: SET_SEARCH_STRING,\n    payload: searchString\n  };\n}\nexport function addAllGenres(allGenres) {\n  return {\n    type: ADD_ALL_GENRES,\n    payload: allGenres\n  };\n}\nexport function addRecomendations(recomendations) {\n  return {\n    type: ADD_RECOMENDATIONS,\n    payload: recomendations\n  };\n}\nexport function addMovieDetails(movieDetails) {\n  return {\n    type: ADD_MOVIE_DETAILS,\n    payload: movieDetails\n  };\n}\nexport function addPopularMovies(movies) {\n  console.log(\"MOVIES in actionCreator\", movies);\n  return {\n    type: ADD_POPULAR_MOVIES,\n    payload: movies\n  };\n}\nexport function getAPIPopularMovies(page) {\n  console.log(\"page in action creator\", page);\n  var urlPopularMovies = \"https://api.themoviedb.org/3/discover/movie?sort_by=popularity.desc&api_key=98135c4d3cc392347281f8d007876760&language=fr-FR&page=\" + page;\n  console.log(\"url\", urlPopularMovies);\n  return function (dispatch) {\n    return fetch(urlPopularMovies).then(function (res) {\n      return res.json();\n    }).then(function (data) {\n      dispatch(addPopularMovies(data.results));\n    }, function (error) {\n      console.log(error);\n    });\n  };\n}\nexport function getAPIGenres() {\n  var urlGenres = \"https://api.themoviedb.org/3/genre/movie/list?api_key=98135c4d3cc392347281f8d007876760&language=fr-FR\";\n  return function (dispatch) {\n    return fetch(urlGenres).then(function (res) {\n      return res.json();\n    }).then(function (data) {\n      dispatch(addAllGenres(data));\n    }, function (error) {\n      console.log(error);\n    });\n  };\n}\nexport function getAPIRecomendations(id) {\n  var urlRecomendation = \"https://api.themoviedb.org/3/movie/\".concat(id, \"/recommendations?api_key=98135c4d3cc392347281f8d007876760&language=fr-FR&page=1\");\n  return function (dispatch) {\n    return fetch(urlRecomendation).then(function (res) {\n      return res.json();\n    }).then(function (data) {\n      dispatch(addRecomendations(data));\n    }, function (error) {\n      console.log(error);\n    });\n  };\n}\nexport function getMovieDetails(id) {\n  //prettier-ignore\n  var url = \"https://api.themoviedb.org/3/movie/\".concat(id, \"?api_key=98135c4d3cc392347281f8d007876760&language=en-US\");\n  return function (dispatch) {\n    return fetch(url).then(function (res) {\n      return res.json();\n    }).then(function (data) {\n      dispatch(addMovieDetails(data));\n    }, function (error) {\n      console.log(error);\n    });\n  };\n}","map":{"version":3,"sources":["C:\\Users\\volum\\Documents\\EPSI\\SERVICES_WEB\\movie-db\\src\\actionsAndReducers.js"],"names":["SET_SEARCH_STRING","ADD_ALL_GENRES","ADD_RECOMENDATIONS","ADD_MOVIE_DETAILS","ADD_POPULAR_MOVIES","searchString","state","action","type","payload","allGenres","genres","recomendations","results","movieDetails","popularMovies","concat","page","console","log","setSearchString","addAllGenres","addRecomendations","addMovieDetails","addPopularMovies","movies","getAPIPopularMovies","urlPopularMovies","dispatch","fetch","then","res","json","data","error","getAPIGenres","urlGenres","getAPIRecomendations","id","urlRecomendation","getMovieDetails","url"],"mappings":"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","sourcesContent":["import {\r\n  SET_SEARCH_STRING,\r\n  ADD_ALL_GENRES,\r\n  ADD_RECOMENDATIONS,\r\n  ADD_MOVIE_DETAILS,\r\n  ADD_POPULAR_MOVIES\r\n} from \"./actions\";\r\n\r\n// les reducers\r\nexport const searchString = (state = \"\", action) => {\r\n  if (action.type === SET_SEARCH_STRING) {\r\n    return action.payload;\r\n  }\r\n  return state;\r\n};\r\n\r\nexport const allGenres = (state = [], action) => {\r\n  if (action.type === ADD_ALL_GENRES) {\r\n    return action.payload.genres;\r\n  }\r\n  return state;\r\n};\r\n\r\nexport const recomendations = (state = [], action) => {\r\n  if (action.type === ADD_RECOMENDATIONS) {\r\n    return action.payload.results;\r\n  }\r\n  return state;\r\n};\r\n\r\nexport const movieDetails = (state = {}, action) => {\r\n  if (action.type === ADD_MOVIE_DETAILS) {\r\n    return action.payload;\r\n  }\r\n  return state;\r\n};\r\n\r\nexport const popularMovies = (state = [], action) => {\r\n  if (action.type === ADD_POPULAR_MOVIES) {\r\n    return state.concat(action.payload);\r\n  }\r\n  return state;\r\n};\r\nexport const page = (state = 1, action) => {\r\n  console.log(\"AAAAAA\");\r\n  if (action.type === ADD_POPULAR_MOVIES) {\r\n    return state + 1;\r\n  }\r\n  return state;\r\n};\r\n\r\n// les actions\r\nexport function setSearchString(searchString) {\r\n  return { type: SET_SEARCH_STRING, payload: searchString };\r\n}\r\n\r\nexport function addAllGenres(allGenres) {\r\n  return { type: ADD_ALL_GENRES, payload: allGenres };\r\n}\r\n\r\nexport function addRecomendations(recomendations) {\r\n  return { type: ADD_RECOMENDATIONS, payload: recomendations };\r\n}\r\n\r\nexport function addMovieDetails(movieDetails) {\r\n  return { type: ADD_MOVIE_DETAILS, payload: movieDetails };\r\n}\r\nexport function addPopularMovies(movies) {\r\n  console.log(\"MOVIES in actionCreator\", movies);\r\n  return { type: ADD_POPULAR_MOVIES, payload: movies };\r\n}\r\n\r\nexport function getAPIPopularMovies(page) {\r\n  console.log(\"page in action creator\", page);\r\n  const urlPopularMovies =\r\n    \"https://api.themoviedb.org/3/discover/movie?sort_by=popularity.desc&api_key=98135c4d3cc392347281f8d007876760&language=fr-FR&page=\" +\r\n    page;\r\n\r\n  console.log(\"url\", urlPopularMovies);\r\n  return dispatch =>\r\n    fetch(urlPopularMovies)\r\n      .then(res => res.json())\r\n      .then(\r\n        data => {\r\n          dispatch(addPopularMovies(data.results));\r\n        },\r\n        error => {\r\n          console.log(error);\r\n        }\r\n      );\r\n}\r\n\r\nexport function getAPIGenres() {\r\n  const urlGenres =\r\n    \"https://api.themoviedb.org/3/genre/movie/list?api_key=98135c4d3cc392347281f8d007876760&language=fr-FR\";\r\n\r\n  return dispatch =>\r\n    fetch(urlGenres)\r\n      .then(res => res.json())\r\n      .then(\r\n        data => {\r\n          dispatch(addAllGenres(data));\r\n        },\r\n        error => {\r\n          console.log(error);\r\n        }\r\n      );\r\n}\r\nexport function getAPIRecomendations(id) {\r\n  const urlRecomendation = `https://api.themoviedb.org/3/movie/${id}/recommendations?api_key=98135c4d3cc392347281f8d007876760&language=fr-FR&page=1`;\r\n  return dispatch =>\r\n    fetch(urlRecomendation)\r\n      .then(res => res.json())\r\n      .then(\r\n        data => {\r\n          dispatch(addRecomendations(data));\r\n        },\r\n        error => {\r\n          console.log(error);\r\n        }\r\n      );\r\n}\r\n\r\nexport function getMovieDetails(id) {\r\n  //prettier-ignore\r\n  const url = `https://api.themoviedb.org/3/movie/${id}?api_key=98135c4d3cc392347281f8d007876760&language=en-US`;\r\n  return dispatch =>\r\n    fetch(url)\r\n      .then(res => res.json())\r\n      .then(\r\n        data => {\r\n          dispatch(addMovieDetails(data));\r\n        },\r\n        error => {\r\n          console.log(error);\r\n        }\r\n      );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}