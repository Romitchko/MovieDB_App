{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\volum\\\\Documents\\\\EPSI\\\\SERVICES_WEB\\\\movie-db\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\volum\\\\Documents\\\\EPSI\\\\SERVICES_WEB\\\\movie-db\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\volum\\\\Documents\\\\EPSI\\\\SERVICES_WEB\\\\movie-db\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\volum\\\\Documents\\\\EPSI\\\\SERVICES_WEB\\\\movie-db\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\volum\\\\Documents\\\\EPSI\\\\SERVICES_WEB\\\\movie-db\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\volum\\\\Documents\\\\EPSI\\\\SERVICES_WEB\\\\movie-db\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _taggedTemplateLiteral from \"C:\\\\Users\\\\volum\\\\Documents\\\\EPSI\\\\SERVICES_WEB\\\\movie-db\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"C:\\\\Users\\\\volum\\\\Documents\\\\EPSI\\\\SERVICES_WEB\\\\movie-db\\\\src\\\\AddWatchListButton.js\";\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  font-family: 'Inconsolata', monospace;\\n  border: 2px solid lightblue;\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React from 'react';\nimport styled from 'styled-components'; //\n\nvar Button = styled.button(_templateObject());\n\nvar WatchListButton =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(WatchListButton, _React$Component);\n\n  function WatchListButton(props) {\n    var _this;\n\n    _classCallCheck(this, WatchListButton);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(WatchListButton).call(this, props));\n\n    _this.componentDidMount = function () {\n      if (localStorage.getItem('watchlist')) {\n        var watchlist = JSON.parse(localStorage.getItem('watchlist'));\n\n        _this.setState({\n          watchlist: watchlist\n        });\n\n        _this.setState({\n          inWatchList: Boolean(_this.props.id in watchlist)\n        });\n      } else {\n        localStorage.setItem('watchlist', '{}');\n      }\n\n      window.addEventListener('beforeunload', _this.moveToLocalStorage);\n    };\n\n    _this.moveToLocalStorage = function () {\n      var watchlist = JSON.parse(localStorage.getItem('watchlist'));\n\n      if (_this.state.inWatchList && !(_this.props.id in watchlist)) {\n        watchlist[_this.props.id] = _this.props.title;\n      }\n\n      if (!_this.state.inWatchList && _this.props.id in watchlist) {\n        delete watchlist[_this.props.id];\n      }\n\n      localStorage.setItem('watchlist', JSON.stringify(watchlist));\n    };\n\n    _this.componentWillUnmount = function () {\n      _this.moveToLocalStorage();\n\n      window.removeEventListener('beforeunload', _this.componentCleanup);\n    };\n\n    _this.state = {\n      inWatchList: false\n    };\n    _this.deleteFromWatchList = _this.deleteFromWatchList.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.moveToLocalStorage = _this.moveToLocalStorage.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.addToWatchList = _this.addToWatchList.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(WatchListButton, [{\n    key: \"deleteFromWatchList\",\n    value: function deleteFromWatchList() {\n      this.setState({\n        inWatchList: false\n      });\n    }\n  }, {\n    key: \"addToWatchList\",\n    value: function addToWatchList() {\n      this.setState({\n        inWatchList: true\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.state.inWatchList) {\n        return React.createElement(Button, {\n          onClick: this.deleteFromWatchList,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 51\n          },\n          __self: this\n        }, \"Delete from watchlist\");\n      } else {\n        return React.createElement(Button, {\n          onClick: this.addToWatchList,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 56\n          },\n          __self: this\n        }, \"Add to watch list\");\n      }\n    }\n  }]);\n\n  return WatchListButton;\n}(React.Component);\n\nexport default WatchListButton;","map":{"version":3,"sources":["C:\\Users\\volum\\Documents\\EPSI\\SERVICES_WEB\\movie-db\\src\\AddWatchListButton.js"],"names":["React","styled","Button","button","WatchListButton","props","componentDidMount","localStorage","getItem","watchlist","JSON","parse","setState","inWatchList","Boolean","id","setItem","window","addEventListener","moveToLocalStorage","state","title","stringify","componentWillUnmount","removeEventListener","componentCleanup","deleteFromWatchList","bind","addToWatchList","Component"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,mBAAnB,C,CACA;;AACA,IAAMC,MAAM,GAAGD,MAAM,CAACE,MAAV,mBAAZ;;IAIMC,e;;;;;AACJ,2BAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,yFAAMA,KAAN;;AADiB,UASnBC,iBATmB,GASC,YAAM;AACxB,UAAIC,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAJ,EAAuC;AACrC,YAAIC,SAAS,GAAGC,IAAI,CAACC,KAAL,CAAWJ,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAX,CAAhB;;AACA,cAAKI,QAAL,CAAc;AAAEH,UAAAA,SAAS,EAATA;AAAF,SAAd;;AACA,cAAKG,QAAL,CAAc;AAAEC,UAAAA,WAAW,EAAEC,OAAO,CAAC,MAAKT,KAAL,CAAWU,EAAX,IAAiBN,SAAlB;AAAtB,SAAd;AACD,OAJD,MAIO;AACLF,QAAAA,YAAY,CAACS,OAAb,CAAqB,WAArB,EAAkC,IAAlC;AACD;;AACDC,MAAAA,MAAM,CAACC,gBAAP,CAAwB,cAAxB,EAAwC,MAAKC,kBAA7C;AACD,KAlBkB;;AAAA,UAmBnBA,kBAnBmB,GAmBE,YAAM;AACzB,UAAIV,SAAS,GAAGC,IAAI,CAACC,KAAL,CAAWJ,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAX,CAAhB;;AACA,UAAI,MAAKY,KAAL,CAAWP,WAAX,IAA0B,EAAE,MAAKR,KAAL,CAAWU,EAAX,IAAiBN,SAAnB,CAA9B,EAA6D;AAC3DA,QAAAA,SAAS,CAAC,MAAKJ,KAAL,CAAWU,EAAZ,CAAT,GAA2B,MAAKV,KAAL,CAAWgB,KAAtC;AACD;;AACD,UAAI,CAAC,MAAKD,KAAL,CAAWP,WAAZ,IAA2B,MAAKR,KAAL,CAAWU,EAAX,IAAiBN,SAAhD,EAA2D;AACzD,eAAOA,SAAS,CAAC,MAAKJ,KAAL,CAAWU,EAAZ,CAAhB;AACD;;AACDR,MAAAA,YAAY,CAACS,OAAb,CAAqB,WAArB,EAAkCN,IAAI,CAACY,SAAL,CAAeb,SAAf,CAAlC;AACD,KA5BkB;;AAAA,UA6BnBc,oBA7BmB,GA6BI,YAAM;AAC3B,YAAKJ,kBAAL;;AACAF,MAAAA,MAAM,CAACO,mBAAP,CAA2B,cAA3B,EAA2C,MAAKC,gBAAhD;AACD,KAhCkB;;AAEjB,UAAKL,KAAL,GAAa;AACXP,MAAAA,WAAW,EAAE;AADF,KAAb;AAGA,UAAKa,mBAAL,GAA2B,MAAKA,mBAAL,CAAyBC,IAAzB,uDAA3B;AACA,UAAKR,kBAAL,GAA0B,MAAKA,kBAAL,CAAwBQ,IAAxB,uDAA1B;AACA,UAAKC,cAAL,GAAsB,MAAKA,cAAL,CAAoBD,IAApB,uDAAtB;AAPiB;AAQlB;;;;0CAyBqB;AACpB,WAAKf,QAAL,CAAc;AAAEC,QAAAA,WAAW,EAAE;AAAf,OAAd;AACD;;;qCACgB;AACf,WAAKD,QAAL,CAAc;AAAEC,QAAAA,WAAW,EAAE;AAAf,OAAd;AACD;;;6BACQ;AACP,UAAI,KAAKO,KAAL,CAAWP,WAAf,EAA4B;AAC1B,eACE,oBAAC,MAAD;AAAQ,UAAA,OAAO,EAAE,KAAKa,mBAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCADF;AAKD,OAND,MAMO;AACL,eAAO,oBAAC,MAAD;AAAQ,UAAA,OAAO,EAAE,KAAKE,cAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BAAP;AACD;AACF;;;;EAlD2B5B,KAAK,CAAC6B,S;;AAqDpC,eAAezB,eAAf","sourcesContent":["import React from 'react';\r\nimport styled from 'styled-components';\r\n//\r\nconst Button = styled.button`\r\n  font-family: 'Inconsolata', monospace;\r\n  border: 2px solid lightblue;\r\n`;\r\nclass WatchListButton extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      inWatchList: false\r\n    };\r\n    this.deleteFromWatchList = this.deleteFromWatchList.bind(this);\r\n    this.moveToLocalStorage = this.moveToLocalStorage.bind(this);\r\n    this.addToWatchList = this.addToWatchList.bind(this);\r\n  }\r\n  componentDidMount = () => {\r\n    if (localStorage.getItem('watchlist')) {\r\n      let watchlist = JSON.parse(localStorage.getItem('watchlist'));\r\n      this.setState({ watchlist });\r\n      this.setState({ inWatchList: Boolean(this.props.id in watchlist) });\r\n    } else {\r\n      localStorage.setItem('watchlist', '{}');\r\n    }\r\n    window.addEventListener('beforeunload', this.moveToLocalStorage);\r\n  };\r\n  moveToLocalStorage = () => {\r\n    let watchlist = JSON.parse(localStorage.getItem('watchlist'));\r\n    if (this.state.inWatchList && !(this.props.id in watchlist)) {\r\n      watchlist[this.props.id] = this.props.title;\r\n    }\r\n    if (!this.state.inWatchList && this.props.id in watchlist) {\r\n      delete watchlist[this.props.id];\r\n    }\r\n    localStorage.setItem('watchlist', JSON.stringify(watchlist));\r\n  };\r\n  componentWillUnmount = () => {\r\n    this.moveToLocalStorage();\r\n    window.removeEventListener('beforeunload', this.componentCleanup);\r\n  };\r\n  deleteFromWatchList() {\r\n    this.setState({ inWatchList: false });\r\n  }\r\n  addToWatchList() {\r\n    this.setState({ inWatchList: true });\r\n  }\r\n  render() {\r\n    if (this.state.inWatchList) {\r\n      return (\r\n        <Button onClick={this.deleteFromWatchList}>\r\n          Delete from watchlist\r\n        </Button>\r\n      );\r\n    } else {\r\n      return <Button onClick={this.addToWatchList}>Add to watch list</Button>;\r\n    }\r\n  }\r\n}\r\n\r\nexport default WatchListButton;\r\n\r\n"]},"metadata":{},"sourceType":"module"}